<script>
    function getMesswerte() {
        if( (document.vars.run.value == 1) && (document.vars.counter.value >= document.vars.refresh.value) ) {
            var ajax;
            ajax = new XMLHttpRequest();
            ajax.onreadystatechange = function() {
                if ( (ajax.readyState == 4) && (ajax.status == 200) && (document.vars.run.value == 1) ) {
                    document.getElementById("messwerte").innerHTML = ajax.responseText;
                }
            }
            ajax.open("GET","mess_get.php?filename={filename}&log=" + document.vars.log.value,true);
            ajax.send();
            document.vars.counter.value = 0;
        }
        document.vars.counter.value++;
    }

    function run() {
        if(document.vars.run.value == 1) {
            document.vars.run.value = 0;
            document.getElementById("run").innerHTML = "Start";
        } else {
            document.vars.run.value = 1;
            document.getElementById("run").innerHTML = "Stop";
        }
    }

    function log_toggle() { //Der Name kommt daher, dass log als Funktionsname nicht erlaubt ist
        if(document.vars.log.value == 1) {
            document.vars.log.value = 0;
            document.getElementById("log").innerHTML = "Aufzeichnen";
        } else {
            document.vars.log.value = 1;
            document.getElementById("log").innerHTML = "Aufzeichnung stoppen";
        }
    }

    setInterval(getMesswerte, 100);
</script>